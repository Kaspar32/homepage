<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        background: black;
        overflow: hidden;
      }
      canvas {
        width: 100vw;
        height: 100vh;
      }
      header {
        color: white;
        width: 100px;
      }
      footer {
        color: white;
        width: 100px;
      }

      header {
        background: black;
        padding: 1rem;
        margin-left: 40rem;
      }

      header nav {
        display: flex;
        gap: 100px;
      }

      header nav a {
        color: white;
        text-decoration: none;
        font-weight: bold;
      }

      header nav a:hover {
        text-decoration: none;
      }

      .Glas {
        font-size: xx-large;
        font-family: "Copperplate", "Copperplate Gothic Light", sans-serif;

        /* Glassmorphism Core */
        background: rgba(255, 255, 255, 0.1); /* leicht durchsichtiges Weiß */
        border-radius: 15px;
        border: 1px solid rgba(255, 255, 255, 0.3);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);

        /* Effekt und Tiefe */
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);

        /* Optional etwas Padding */
        padding: 10px;
        color: white;
        text-align: center;

        
      }
    </style>
    <img
      id="pattern"
      src="C:\Users\kaspar.bachmann\Framework\Homepage\V2630_00.jpg"
      alt="Pattern"
      style="display: none"
    />
  </head>

  <body>
    <header>
      <nav>
        <button class="Glas">
          <a href="../homepage/home.html"
            >Home</a
          >
        </button>

        <button class="Glas">
          <a href="../homepage/videos.html"
            >Vids</a
          >
        </button>

        <button class="Glas">
          <a href="../homepage/links.html"
            >Links</a
          >
        </button>
      </nav>
    </header>

    <canvas id="c"></canvas>
    <script>
      (() => {
        const canvas = document.getElementById("c");
        const ctx = canvas.getContext("2d");

        resize();
        window.addEventListener("resize", resize);

        function resize() {
          canvas.width = innerWidth;
          canvas.height = innerHeight;
        }

        const PARTICLE_COUNT = 1000;
        const RADIUS = Math.min(innerWidth, innerHeight) * 0.35;
        const particles = [];

        function initSphere() {
          particles.length = 0;
          const cx = innerWidth / 2;
          const cy = innerHeight / 2;

          for (let i = 0; i < PARTICLE_COUNT; i++) {
            const phi = Math.acos(1 - (2 * (i + 0.5)) / PARTICLE_COUNT);
            const theta = Math.PI * (1 + Math.sqrt(5)) * (i + 0.5);

            const x = Math.cos(theta) * Math.sin(phi);
            const y = Math.sin(theta) * Math.sin(phi);
            const z = Math.cos(phi);

            const homeX = cx + x * RADIUS;
            const homeY = cy + y * RADIUS;

            const vx = (Math.random() - 0.5) * 2;
            const vy = (Math.random() - 0.5) * 2;

            // Blinken: Phase und Geschwindigkeit
            const blinkSpeed = 0.002 + Math.random() * 0.004; // wie schnell
            const blinkOffset = Math.random() * Math.PI * 2; // Startphase

            particles.push({
              x: homeX,
              y: homeY,
              homeX,
              homeY,
              vx,
              vy,
              returning: true,
              blinkSpeed,
              blinkOffset,
            });
          }
        }

        initSphere();

        const EXPLOSION_SPEED = 400;
        const EXPLOSION_DURATION = 800;
        const SPRING = 0.02;
        const DAMPING = 0.88;
        const FRICTION = 0.98;
        let lastExplosion = 0;

        function explode(cx, cy) {
          const now = performance.now();
          lastExplosion = now;

          for (let p of particles) {
            const dx = p.x - cx;
            const dy = p.y - cy;
            const dist = Math.sqrt(dx * dx + dy * dy) || 0.0001;

            const nx = dx / dist;
            const ny = dy / dist;

            const speed = EXPLOSION_SPEED * (0.5 + Math.random());
            p.vx = nx * speed * 0.016;
            p.vy = ny * speed * 0.016;
            p.returning = false;
          }

          setTimeout(() => {
            if (lastExplosion === now) {
              for (let p of particles) {
                p.returning = true;
              }
            }
          }, EXPLOSION_DURATION);
        }

        canvas.addEventListener("pointerdown", (e) => {
          explode(e.clientX, e.clientY);
        });

        function animate(time) {
          ctx.fillStyle = "black";
          ctx.fillRect(0, 0, canvas.width, canvas.height);

          for (let p of particles) {
            if (!p.returning) {
              p.vx *= FRICTION;
              p.vy *= FRICTION;
              p.x += p.vx;
              p.y += p.vy;
            } else {
              const ax = (p.homeX - p.x) * SPRING;
              const ay = (p.homeY - p.y) * SPRING;
              p.vx = (p.vx + ax) * DAMPING;
              p.vy = (p.vy + ay) * DAMPING;
              p.x += p.vx;
              p.y += p.vy;

              if (
                Math.abs(p.x - p.homeX) < 0.5 &&
                Math.abs(p.y - p.homeY) < 0.5 &&
                Math.abs(p.vx) < 0.3 &&
                Math.abs(p.vy) < 0.3
              ) {
                p.x = p.homeX;
                p.y = p.homeY;
                p.vx = (Math.random() - 0.5) * 2;
                p.vy = (Math.random() - 0.5) * 2;
              }
            }

            // Alpha-Wert für Blinken berechnen
            const alpha =
              0.5 + 0.5 * Math.sin(time * p.blinkSpeed + p.blinkOffset);

            ctx.beginPath();
            ctx.fillStyle = `rgba(255,255,255,${alpha})`;
            ctx.shadowColor = " white";
            ctx.shadowBlur = "20";
            ctx.arc(p.x, p.y, 1.5, 0, Math.PI * 2);
            ctx.fill();
          }

          requestAnimationFrame(animate);
        }

        animate();
      })();
    </script>

    <footer>copyright</footer>
  </body>
</html>
